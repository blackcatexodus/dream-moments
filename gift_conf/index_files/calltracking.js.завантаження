!function(c,r,e){!function(e){"use strict";var n=-1,r={onVisible:function(n){var e=r.isSupported();if(!e||!r.hidden())return n(),e;var i=r.change(function(e,t){r.hidden()||(r.unbind(i),n())});return i},change:function(e){if(!r.isSupported())return!1;var t=n+=1;return r._callbacks[t]=e,r._listen(),t},unbind:function(e){delete r._callbacks[e]},afterPrerendering:function(n){var e=r.isSupported(),i="prerender";if(!e||i!=r.state())return n(),e;var a=r.change(function(e,t){i!=t&&(r.unbind(a),n())});return a},hidden:function(){return!(!r._doc.hidden&&!r._doc.webkitHidden)},state:function(){return r._doc.visibilityState||r._doc.webkitVisibilityState||"visible"},isSupported:function(){return!(!r._doc.visibilityState&&!r._doc.webkitVisibilityState)},_doc:document||{},_callbacks:{},_change:function(e){var t=r.state();for(var n in r._callbacks)r._callbacks[n].call(r._doc,e,t)},_listen:function(){if(!r._init){var e="visibilitychange";r._doc.webkitVisibilityState&&(e="webkit"+e);var t=function(){r._change.apply(r,arguments)};r._doc.addEventListener?r._doc.addEventListener(e,t):r._doc.attachEvent(e,t),r._init=!0}}};"undefined"!=typeof module&&module.exports,e.bctVisibility=r}(this),function(s){"use strict";var a=-1,e=function(o){return o.every=function(e,t,n){o._time(),n||(n=t,t=null);var i=a+=1;return o._timers[i]={visible:e,hidden:t,callback:n},o._run(i,!1),o.isSupported()&&o._listen(),i},o.stop=function(e){return!!o._timers[e]&&(o._stop(e),delete o._timers[e],!0)},o._timers={},o._time=function(){o._timed||(o._timed=!0,o._wasHidden=o.hidden(),o.change(function(){o._stopRun(),o._wasHidden=o.hidden()}))},o._run=function(e,t){var n,i=o._timers[e];if(o.hidden()){if(null===i.hidden)return;n=i.hidden}else n=i.visible;var a=function(){i.last=new Date,i.callback.call(s)};if(t){var r=new Date-i.last;r<n?i.delay=setTimeout(function(){a(),i.id=setInterval(a,n)},n-r):(a(),i.id=setInterval(a,n))}else i.id=setInterval(a,n)},o._stop=function(e){var t=o._timers[e];clearInterval(t.id),clearTimeout(t.delay),delete t.id,delete t.delay},o._stopRun=function(e){var t=o.hidden(),n=o._wasHidden;if(t&&!n||!t&&n)for(var i in o._timers)o._stop(i),o._run(i,!t)},o};"undefined"!=typeof module&&module.exports,e(s.bctVisibility)}(window),function(e){function b(){var e=arguments[0],t=b.cache;return t[e]&&t.hasOwnProperty(e)||(t[e]=b.parse(e)),b.format.call(null,t[e],arguments)}function y(e){return"number"==typeof e?"number":"string"==typeof e?"string":Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var v={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/bcdiefguxX/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};b.format=function(e,t){var n,i,a,r,o,s,l,c,u,d=1,h=e.length,g="",f=[],p=!0,m="";for(i=0;i<h;i++)if("string"===(g=y(e[i])))f[f.length]=e[i];else if("array"===g){if((r=e[i])[2])for(n=t[d],a=0;a<r[2].length;a++){if(!n.hasOwnProperty(r[2][a]))throw new Error(b('[sprintf] property "%s" does not exist',r[2][a]));n=n[r[2][a]]}else n=r[1]?t[r[1]]:t[d++];if(v.not_type.test(r[8])&&v.not_primitive.test(r[8])&&"function"==y(n)&&(n=n()),v.numeric_arg.test(r[8])&&"number"!=y(n)&&isNaN(n))throw new TypeError(b("[sprintf] expecting number but found %s",y(n)));switch(v.number.test(r[8])&&(p=0<=n),r[8]){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,r[6]?parseInt(r[6]):0);break;case"e":n=r[7]?parseFloat(n).toExponential(r[7]):parseFloat(n).toExponential();break;case"f":n=r[7]?parseFloat(n).toFixed(r[7]):parseFloat(n);break;case"g":n=r[7]?parseFloat(n).toPrecision(r[7]):parseFloat(n);break;case"o":n=n.toString(8);break;case"s":n=String(n),n=r[7]?n.substring(0,r[7]):n;break;case"t":n=String(!!n),n=r[7]?n.substring(0,r[7]):n;break;case"T":n=y(n),n=r[7]?n.substring(0,r[7]):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=r[7]?n.substring(0,r[7]):n;break;case"x":n=parseInt(n,10).toString(16);break;case"X":n=parseInt(n,10).toString(16).toUpperCase()}v.json.test(r[8])?f[f.length]=n:(!v.number.test(r[8])||p&&!r[3]?m="":(m=p?"+":"-",n=n.toString().replace(v.sign,"")),s=r[4]?"0"===r[4]?"0":r[4].charAt(1):" ",l=r[6]-(m+n).length,o=r[6]&&0<l?(c=s,0<=(u=l)&&u<=7&&T[c]?T[c][u]:Array(u+1).join(c)):"",f[f.length]=r[5]?m+n+o:"0"===s?m+o+n:o+m+n)}return f.join("")},b.cache={},b.parse=function(e){for(var t=e,n=[],i=[],a=0;t;){if(null!==(n=v.text.exec(t)))i[i.length]=n[0];else if(null!==(n=v.modulo.exec(t)))i[i.length]="%";else{if(null===(n=v.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){a|=1;var r=[],o=n[2],s=[];if(null===(s=v.key.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(r[r.length]=s[1];""!==(o=o.substring(s[0].length));)if(null!==(s=v.key_access.exec(o)))r[r.length]=s[1];else{if(null===(s=v.index_access.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");r[r.length]=s[1]}n[2]=r}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i[i.length]=n}t=t.substring(n[0].length)}return i};var t=function(e,t,n){return(n=(t||[]).slice(0)).splice(0,0,e),b.apply(null,n)},T={0:["","0","00","000","0000","00000","000000","0000000"]," ":[""," ","  ","   ","    ","     ","      ","       "],_:["","_","__","___","____","_____","______","_______"]};e.sprintf=b,e.vsprintf=t,"function"==typeof define&&define.amd}("undefined"==typeof window?this:window);var s;for(var t in r.BinotelCallTracking)if(!1===r.BinotelCallTracking[t].initState){r.BinotelCallTracking[t].initState="processing",s=r.BinotelCallTracking[t];break}if(s){var n;s.debugMode&&console.log("[%s] window.BinotelCallTrackingSettings",Date(),r.BinotelCallTrackingSettings),r.BinotelCallTrackingSettings&&(r.BinotelCallTrackingSettings.geoipOverride&&"object"==typeof r.BinotelCallTrackingSettings.geoipOverride&&r.BinotelCallTrackingSettings.geoipOverride.length&&(s.geoipOverride=r.BinotelCallTrackingSettings.geoipOverride),r.BinotelCallTrackingSettings.onReady&&"function"==typeof r.BinotelCallTrackingSettings.onReady&&(s.onReady=r.BinotelCallTrackingSettings.onReady)),s.debugMode&&console.log("Binotel Call Tracking in processing!!! Widget initiator is %s",s.widgetId),setTimeout(function(){n=new g,s.listeners=n.listeners,s.sendCallTrackingRequest=n.sendCallTrackingRequest,s.buttonShowPhoneNumberPressed=n.buttonShowPhoneNumberPressed,s.replacePhoneNumbersOnDynamicContent=n.replacePhoneNumbersOnDynamicContent,s.overrideRouteWithTime=n.overrideRouteWithTime,n.init()},100);var a,l,o,u,d,h,g=function(){var i,a,o={visitorData:null,googleAnalyticsData:null,helpers:{listeners:(a={},(i=i||{}).emit=function(e,t){e=m(e);var n=a[e];if(n)for(var i=0;i<n.length;i++)n[i](t)},i.emitArgs=function(e){e=m(e);var t=a[e],n=[].slice.call(arguments,1);if(t)for(var i=0;i<t.length;i++)t[i].apply(null,n)},i.on=function(e,t){return e=m(e),a[e]=a[e]||[],a[e].push(t),{un:function(){i.un(e,t)}}},i.un=function(e,t){e=m(e);var n=a[e],i=n.indexOf(t);-1<i&&(n.splice(i,1),0<n.length||delete a[e])},i.one=function(e,t){var n=i.on(e,function(){n.un(),t.apply(null,arguments)})},i)},sendingCallTrackingRequestInProgress:!1,sendingCallTrackingRequestIsDisabled:!1,buttonShowPhoneNumberWasPressed:!1,phoneNumbers:{displayed:"original",original:{},originalID:0,callTracking:{}},statisticsData:{sentCallTrackingRequestTimeLast:0,sentCallTrackingRequestCounter:0},dynamicData:{intervalOfSendCallTrackingRequest:null,timerOfSendCallTrackingRequest:null,timerOfRestoreOriginalPhoneNumbers:null,timerOfRunVisibleState:null,timerOfRunHiddenState:null,timerOfAddingBinctClassNames:null,timerOfWaitingForContentUpdateOnDynamicContent:null,rentalDuration:null},trackingActivityOnSite:null};return this.init=function(){o.helpers.docReady(function(){o.trackingActivityOnSite=new f,o.trackingActivityOnSite.init(5*s.dynamicKeepAliveTime),s.listOfAddingBinctClassNamesInThisLoop=JSON.parse(JSON.stringify(s.listOfAddingBinctClassNames)),s.listOfAddingBinctClassNamesInThisLoop.length&&o.helpers.addingBinctClassNames();var e=history.pushState;history.pushState=function(){e.apply(history,arguments),o.helpers.replacePhoneNumbersOnDynamicContent()};var t=history.replaceState;history.replaceState=function(){t.apply(history,arguments),o.helpers.replacePhoneNumbersOnDynamicContent()},window.addEventListener("popstate",function(e){o.helpers.replacePhoneNumbersOnDynamicContent()}),o.helpers.preInit(),s.onReady&&s.onReady(s.widgetId)}),setInterval(function(){},18e5)},this.listeners=o.helpers.listeners,this.sendCallTrackingRequest=function(){o.helpers.sendCallTrackingRequest()},this.buttonShowPhoneNumberPressed=function(){o.helpers.buttonShowPhoneNumberPressed()},this.replacePhoneNumbersOnDynamicContent=function(){o.helpers.replacePhoneNumbersOnDynamicContent()},this.overrideRouteWithTime=function(){o.helpers.overrideRouteWithTime.apply(null,arguments)},o.helpers.addingBinctClassNames=function(e){if(clearTimeout(o.dynamicData.timerOfAddingBinctClassNames),100<=(e=e||0))return s.debugMode&&(console.log("%c[%s] %s","background: #fc7c7c; color: #fff",Date(),"Can't use all XPath"),console.log(s.listOfAddingBinctClassNamesInThisLoop),o.helpers.replacePhoneNumbersAgain()),!1;for(var t=!1,n=s.listOfAddingBinctClassNamesInThisLoop.length-1;0<=n;n--)try{var i=document.evaluate(s.listOfAddingBinctClassNamesInThisLoop[n].xpath,document,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);if(i.snapshotLength){for(var a=0;a<i.snapshotLength;a++)i.snapshotItem(a).classList.add(s.listOfAddingBinctClassNamesInThisLoop[n].className);t=!0,s.listOfAddingBinctClassNamesInThisLoop.splice(n,1)}}catch(e){s.debugMode&&console.error("Bad xpath: ",s.listOfAddingBinctClassNamesInThisLoop[n]),s.listOfAddingBinctClassNamesInThisLoop.splice(n,1)}s.listOfAddingBinctClassNamesInThisLoop.length?(t&&o.helpers.replacePhoneNumbersAgain(),o.dynamicData.timerOfAddingBinctClassNames=setTimeout(function(){o.helpers.addingBinctClassNames(++e)},150)):s.debugMode&&(0!==e&&o.helpers.replacePhoneNumbersAgain(),o.helpers.logData("XPath completed"))},o.helpers.preInit=function(e){if(40<=(e=e||0))return s.debugMode&&console.log("%c[%s] %s","background: #fc7c7c; color: #fff",Date(),"Can't find IATV"),!1;void 0===r.BinotelInformationAboutTheVisitor||"object"!=typeof r.BinotelInformationAboutTheVisitor?setTimeout(function(){o.helpers.preInit(++e)},e<30?100:1e3):setTimeout(function(){o.helpers.init()},50)},o.helpers.init=function(){s.debugMode&&o.helpers.logData("Run self.helpers.init"),o.helpers.saveOriginalDataOfPhoneNumbers();try{o.visitorData=r.BinotelInformationAboutTheVisitor.getVisitorData()}catch(e){console.error(e)}if(!o.visitorData)return console.log("%c[%s] %s","background: #fc7c7c; color: #fff",Date(),"Bad IATV data"),!1;if(s.debugMode&&console.log("[%s] Current UTM data: ",Date(),o.visitorData.utmDataCurrent),s.geoipOverride){for(var e,t=0;t<s.geoipOverride.length;t++)s.geoipOverride[t].country&&(o.visitorData.geoipData.country===s.geoipOverride[t].country?s.geoipOverride[t].region?o.visitorData.geoipData.region===s.geoipOverride[t].region?s.geoipOverride[t].city?o.visitorData.geoipData.city===s.geoipOverride[t].city?e=s.geoipOverride[t].widgetId:"defaultValue"===s.geoipOverride[t].city&&(e=s.geoipOverride[t].widgetId):e=s.geoipOverride[t].widgetId:"defaultValue"===s.geoipOverride[t].region&&(e=s.geoipOverride[t].widgetId):e=s.geoipOverride[t].widgetId:"defaultValue"===s.geoipOverride[t].country&&(e=s.geoipOverride[t].widgetId));s.debugMode&&(console.log("self.visitorData.geoipData",o.visitorData.geoipData),console.log("newWidgetId",e),console.log("bctConfig.widgetId",s.widgetId)),void 0!==e&&(s.widgetId=e)}-1<s.type.indexOf("dynamic")&&s.dynamicInactivityTime?r.BinotelInformationAboutTheVisitor.getGoogleAnalyticsDataViaCallback(function(e){o.googleAnalyticsData=e,bctVisibility.onVisible(function(){o.helpers.sendCallTrackingRequest()}),o.trackingActivityOnSite.onActive(function(){s.debugMode&&o.helpers.logData("Visitor is active on page"),o.helpers.sendCallTrackingRequest()},"ctActive"),o.trackingActivityOnSite.onInactive(function(){s.debugMode&&o.helpers.logData("Visitor is inactive on page"),clearTimeout(o.dynamicData.timerOfSendCallTrackingRequest)},"ctInactive"),bctVisibility.isSupported()&&bctVisibility.change(function(e,t){if("visible"===t){s.debugMode&&o.helpers.logData("Page is visible"),clearTimeout(o.dynamicData.timerOfRunVisibleState),clearTimeout(o.dynamicData.timerOfRunHiddenState);var n=Math.floor(Date.now()/1e3)-o.statisticsData.sentCallTrackingRequestTimeLast,i=o.helpers.getDynamicKeepAliveTime();i<n+5?o.helpers.sendCallTrackingRequest():o.dynamicData.timerOfRunVisibleState=setTimeout(function(){o.helpers.sendCallTrackingRequest()},1e3*(i-n-5)),o.trackingActivityOnSite.onActive(function(){s.debugMode&&o.helpers.logData("Visitor is active on page (visible)"),o.helpers.sendCallTrackingRequest()},"ctActive"),o.trackingActivityOnSite.onInactive(function(){s.debugMode&&o.helpers.logData("Visitor is inactive on page (visible)"),clearTimeout(o.dynamicData.timerOfRunVisibleState),clearTimeout(o.dynamicData.timerOfSendCallTrackingRequest)},"ctInactive")}else"hidden"===t&&(s.debugMode&&o.helpers.logData("Page is hidden"),clearTimeout(o.dynamicData.timerOfRunHiddenState),o.dynamicData.timerOfRunHiddenState=setTimeout(function(){s.debugMode&&o.helpers.logData("Run hidden state handler"),clearTimeout(o.dynamicData.timerOfRunVisibleState),clearTimeout(o.dynamicData.timerOfSendCallTrackingRequest)},2*(s.dynamicKeepAliveTime+1)*1e3),o.trackingActivityOnSite.onActive(function(){},"ctActive"),o.trackingActivityOnSite.onInactive(function(){},"ctInactive"))})}):bctVisibility.onVisible(function(){o.helpers.sendCallTrackingRequest()}),s.initState="success"},o.helpers.getDynamicKeepAliveTime=function(){var e=s.dynamicKeepAliveTime;if(o.visitorData){var t=Math.floor(Date.now()/1e3)+s.clientSideTimeOffset-o.visitorData.currentVisitStartedAt;0<=t&&t<=20?e=2:null!==o.dynamicData.rentalDuration&&0<=o.dynamicData.rentalDuration&&o.dynamicData.rentalDuration<=20?e=2:0===o.statisticsData.sentCallTrackingRequestCounter&&(e=2)}return s.debugMode&&console.log("%c[%s] dynamicKeepAliveTime is %s","color: #999",Date(),e),e},o.helpers.sendCallTrackingRequest=function(){if(!o.sendingCallTrackingRequestIsDisabled){-1<s.type.indexOf("dynamic")&&s.dynamicInactivityTime&&(clearTimeout(o.dynamicData.timerOfRestoreOriginalPhoneNumbers),o.dynamicData.timerOfRestoreOriginalPhoneNumbers=setTimeout(function(){o.helpers.restoreOriginalPhoneNumbers()},1e3*s.dynamicInactivityTime)),clearTimeout(o.dynamicData.timerOfSendCallTrackingRequest),o.dynamicData.timerOfSendCallTrackingRequest=setTimeout(function(){o.helpers.sendCallTrackingRequest()},1e3*o.helpers.getDynamicKeepAliveTime()),o.statisticsData.sentCallTrackingRequestTimeLast=Math.floor(Date.now()/1e3),o.statisticsData.sentCallTrackingRequestCounter++,s.debugMode&&o.helpers.logData("Run self.helpers.sendCallTrackingRequest");var e=JSON.parse(JSON.stringify(o.visitorData));0===s.sendUtmDataFirst&&e.utmDataFirst&&delete e.utmDataFirst,0===s.sendUtmDataFirstPaid&&e.utmDataFirstPaid&&delete e.utmDataFirstPaid,0===s.onlyPaidSource&&0===s.sendUtmDataLastPaid&&e.utmDataLastPaid&&delete e.utmDataLastPaid,o.sendingCallTrackingRequestInProgress?o.helpers.logData("Skip sending сall tracking request"):(o.sendingCallTrackingRequestInProgress=!0,p({type:"POST",url:s.backendHost+"/calltracking/getSlot/",data:{widgetID:s.widgetId,visitorData:JSON.parse(JSON.stringify(e)),googleAnalyticsData:JSON.parse(JSON.stringify(o.googleAnalyticsData)),widgetTimestampIsNow:Math.floor(Date.now()/1e3),bspnPressed:o.buttonShowPhoneNumberWasPressed},dataType:"json"},function(e){if(o.sendingCallTrackingRequestInProgress=!1,e&&"success"===e.status&&e.callTracking&&(0===s.buttonShowPhoneNumber||"demonstrateToEngineers"!==e.option)){if(!0===e.isStatic&&(s.debugMode&&console.log("[%s] %s",Date(),"Static call tracking is used"),o.sendingCallTrackingRequestIsDisabled=!0,clearTimeout(o.dynamicData.timerOfSendCallTrackingRequest),clearTimeout(o.dynamicData.timerOfRestoreOriginalPhoneNumbers)),"1"===e.seoctf&&(o.helpers.sendEventToFb("Binotel CallTracking - Call received"),o.helpers.sendToGtm({event:"Binotel CallTracking - Call received"}),o.helpers.listeners.emit("Call received"),s.debugMode&&o.helpers.logData("Send /calltracking/track-seoctf/"),p({type:"POST",url:s.backendHost+"/calltracking/track-seoctf/",data:{widgetID:s.widgetId,googleAnalyticsData:JSON.parse(JSON.stringify(o.googleAnalyticsData))},dataType:"json"},function(e){s.debugMode&&o.helpers.logData("Response from /calltracking/track-seoctf/",e)},function(e,t){console.log(t,e)})),e.rentalDuration&&(o.dynamicData.rentalDuration=e.rentalDuration),"original"===o.phoneNumbers.displayed||"buttonShowPhoneNumber"===o.phoneNumbers.displayed){o.phoneNumbers.callTracking=e.callTracking;for(var t=1;t<=6;t++)for(var n=c.getElementsByClassName("binct-phone-number-"+t),i=0;i<n.length;i++)if(e.callTracking["phoneNumber"+t+"InHtml"]&&n[i].getAttribute("data-binct-original")){o.phoneNumbers.displayed="callTracking";var a=o.phoneNumbers.original[n[i].getAttribute("data-binct-original")];n[i].innerHTML=e.callTracking["phoneNumber"+t+"InHtml"],a.href&&n[i].setAttribute("href","tel:"+n[i].textContent.toString().replace(/[^\+0-9]/g,""))}}else if(JSON.stringify(e.callTracking)!==JSON.stringify(o.phoneNumbers.callTracking)){var r=!0;for(t=1;t<=6;t++)for(n=c.getElementsByClassName("binct-phone-number-"+t),i=0;i<n.length;i++)if(n[i].getAttribute("data-binct-original")){a=o.phoneNumbers.original[n[i].getAttribute("data-binct-original")];e.callTracking["phoneNumber"+t+"InHtml"]?(r=!1,n[i].innerHTML=e.callTracking["phoneNumber"+t+"InHtml"],a.href&&n[i].setAttribute("href","tel:"+n[i].textContent.toString().replace(/[^\+0-9]/g,""))):(n[i].innerHTML=a.innerHTML,a.href&&n[i].setAttribute("href",a.href))}r?o.phoneNumbers.displayed="original":o.phoneNumbers.callTracking=e.callTracking}}else 1!==s.buttonShowPhoneNumber||o.buttonShowPhoneNumberWasPressed||o.helpers.setButtonShowPhoneNumber(),o.sendingCallTrackingRequestIsDisabled=!0,clearTimeout(o.dynamicData.timerOfSendCallTrackingRequest),clearTimeout(o.dynamicData.timerOfRestoreOriginalPhoneNumbers),o.helpers.restoreOriginalPhoneNumbers()},function(e,t){o.sendingCallTrackingRequestInProgress=!1,s.debugMode&&console.log("%c[%s]","background: #fc7c7c; color: #fff",Date(),t,e),o.helpers.restoreOriginalPhoneNumbers()}))}},o.helpers.buttonShowPhoneNumberPressed=function(){s.debugMode&&o.helpers.logData("Run self.helpers.buttonShowPhoneNumberPressed"),o.buttonShowPhoneNumberWasPressed=!0,o.sendingCallTrackingRequestIsDisabled=!1,o.helpers.sendCallTrackingRequest()},o.helpers.replacePhoneNumbersOnDynamicContent=function(){if(-1!==window.location.toString().indexOf("disable-replacePhoneNumbersOnDynamicContent"))return!1;s.debugMode&&o.helpers.logData("Run self.helpers.replacePhoneNumbersOnDynamicContent"),s.listOfAddingBinctClassNamesInThisLoop=JSON.parse(JSON.stringify(s.listOfAddingBinctClassNames)),s.listOfAddingBinctClassNamesInThisLoop.length&&o.helpers.addingBinctClassNames(),1!==s.buttonShowPhoneNumber||o.buttonShowPhoneNumberWasPressed?o.helpers.replacePhoneNumbersAgain():"buttonShowPhoneNumber"===o.phoneNumbers.displayed?o.helpers.replacePhoneNumbersOnDynamicContentWithButtonShowPhoneNumber():o.helpers.setButtonShowPhoneNumber()},o.helpers.replacePhoneNumbersOnDynamicContentWithButtonShowPhoneNumber=function(e){if(s.debugMode&&!e&&o.helpers.logData("Run self.helpers.replacePhoneNumbersOnDynamicContentWithButtonShowPhoneNumber"),clearTimeout(o.dynamicData.timerOfWaitingForContentUpdateOnDynamicContent),100<=(e=e||0))return s.debugMode&&console.log("%c[%s] %s","background: #fc7c7c; color: #fff",Date(),"Can't process self.helpers.replacePhoneNumbersOnDynamicContentWithButtonShowPhoneNumber"),!1;for(var t=!1,n=1;n<=6;n++)if(s["buttonContentShowPhoneNumber"+n])for(var i=c.getElementsByClassName("binct-phone-number-"+n),a=0;a<i.length;a++)i[a].innerHTML!==s["buttonContentShowPhoneNumber"+n]&&(t=!0);t?(o.phoneNumbers.displayed="original",setTimeout(function(){o.helpers.setButtonShowPhoneNumber()},100)):o.dynamicData.timerOfWaitingForContentUpdateOnDynamicContent=setTimeout(function(){o.helpers.replacePhoneNumbersOnDynamicContentWithButtonShowPhoneNumber(++e)},50)},o.helpers.replacePhoneNumbersAgain=function(){s.debugMode&&o.helpers.logData("Run self.helpers.replacePhoneNumbersAgain"),o.helpers.saveOriginalDataOfPhoneNumbers();for(var e=1;e<=6;e++)for(var t=c.getElementsByClassName("binct-phone-number-"+e),n=0;n<t.length;n++)if(o.phoneNumbers.callTracking["phoneNumber"+e+"InHtml"]&&t[n].getAttribute("data-binct-original")){var i=o.phoneNumbers.original[t[n].getAttribute("data-binct-original")];t[n].innerHTML=o.phoneNumbers.callTracking["phoneNumber"+e+"InHtml"],i.href&&t[n].setAttribute("href","tel:"+t[n].textContent.toString().replace(/[^\+0-9]/g,""))}},o.helpers.overrideRouteWithTime=function(e){s.debugMode&&console.log("%c[%s] %s %s","color: #999",Date(),"Run self.helpers.overrideRouteWithTime",e),p({type:"POST",url:s.backendHost+"/calltracking/override-route-with-time/",data:{widgetID:s.widgetId,googleAnalyticsData:JSON.parse(JSON.stringify(o.googleAnalyticsData)),routeID:e},dataType:"json"},function(e){s.debugMode&&o.helpers.logData("Response from /calltracking/override-route-with-time/",e)},function(e,t){console.log(t,e)})},o.helpers.restoreOriginalPhoneNumbers=function(){if(s.debugMode&&o.helpers.logData("Run self.helpers.restoreOriginalPhoneNumbers"),1===s.buttonShowPhoneNumber&&"callTracking"===o.phoneNumbers.displayed)o.buttonShowPhoneNumberWasPressed=!1,o.sendingCallTrackingRequestIsDisabled=!0,o.helpers.setButtonShowPhoneNumber();else if("callTracking"===o.phoneNumbers.displayed||"buttonShowPhoneNumber"===o.phoneNumbers.displayed&&o.buttonShowPhoneNumberWasPressed){o.phoneNumbers.displayed="original";for(var e=1;e<=6;e++)for(var t=c.getElementsByClassName("binct-phone-number-"+e),n=0;n<t.length;n++)if(t[n].getAttribute("data-binct-original")){var i=o.phoneNumbers.original[t[n].getAttribute("data-binct-original")];i.innerHTML!==t[n].innerHTML&&(t[n].innerHTML=i.innerHTML,t[n].removeEventListener("click",o.helpers.buttonShowPhoneNumberPressed),i.href&&t[n].setAttribute("href",i.href))}}},o.helpers.setButtonShowPhoneNumber=function(){if(s.debugMode&&o.helpers.logData("Run self.helpers.setButtonShowPhoneNumber"),["original","callTracking"].includes(o.phoneNumbers.displayed))for(var e=1;e<=6;e++)if(s["buttonContentShowPhoneNumber"+e]){o.phoneNumbers.displayed="buttonShowPhoneNumber";for(var t=c.getElementsByClassName("binct-phone-number-"+e),n=0;n<t.length;n++)t[n].innerHTML=s["buttonContentShowPhoneNumber"+e],t[n].addEventListener("click",o.helpers.buttonShowPhoneNumberPressed),"a"===t[n].tagName.toLowerCase()&&t[n].setAttribute("href","javascript:void(0);")}},o.helpers.sendEventToFb=function(e){if("function"==typeof fbq){s.debugMode&&o.helpers.logData("Send event to FB");try{fbq("trackCustom","Binotel Lead",{content_name:e})}catch(e){console.error(e)}}},o.helpers.sendToGtm=function(e){if("undefined"!=typeof dataLayer&&dataLayer&&dataLayer.push&&"function"==typeof dataLayer.push){s.debugMode&&o.helpers.logData("Send event to GTM");try{dataLayer.push(e)}catch(e){console.error(e)}}},o.helpers.parseQueryString=function(e){for(var t,n=/[?&]([^=#&]+)=([^&#]*)/g,i={};t=n.exec(e);)try{i[decodeURIComponent(t[1])]=decodeURIComponent(t[2])}catch(e){}return i},o.helpers.parseReferrer=function(e){var t={hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",port:"",protocol:"",search:""};if(""!==e){var n=document.createElement("a");n.href=e,t.hash=n.hash,t.host=n.host,t.hostname=n.hostname,t.href=n.href,t.origin=n.origin,t.pathname=n.pathname,t.port=n.port,t.protocol=n.protocol,t.search=n.search}return t},o.helpers.saveOriginalDataOfPhoneNumbers=function(e,t){s.debugMode&&o.helpers.logData("Run self.helpers.saveOriginalDataOfPhoneNumbers");for(var n=1;n<=6;n++)for(var i=c.getElementsByClassName("binct-phone-number-"+n),a=0;a<i.length;a++)o.helpers.saveOriginalDataOfPhoneNumberElement(i[a],n);return!0},o.helpers.saveOriginalDataOfPhoneNumberElement=function(e,t){return e.getAttribute("data-binct-original")||(o.phoneNumbers.originalID++,e.setAttribute("data-binct-original",o.phoneNumbers.originalID),o.phoneNumbers.original[o.phoneNumbers.originalID]={originalID:o.phoneNumbers.originalID,binctPhoneNumber:t,innerHTML:e.innerHTML},o.helpers.checkElementForHrefAndTel(e)&&(o.phoneNumbers.original[o.phoneNumbers.originalID].href=e.getAttribute("href"))),!0},o.helpers.checkElementForHrefAndTel=function(e){return!("a"!==e.tagName.toLowerCase()||!/tel:/.test(e.getAttribute("href")))},o.helpers.setClientSideTimeOffset=function(n){p({type:"GET",url:s.backendHost+"/calltracking/getTimestamp/",dataType:"json"},function(e){e&&e.timestamp?s.clientSideTimeOffset=e.timestamp-Math.floor(Date.now()/1e3):!0!==n&&setTimeout(function(){o.helpers.setClientSideTimeOffset(!0)},12e4)},function(e,t){console.log(t,e),!0!==n&&setTimeout(function(){o.helpers.setClientSideTimeOffset(!0)},12e4)})},o.helpers.docReady=function(e){(new function(){var t={callback:function(){},readyFired:!1};this.init=function(e){t.callback=e,"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(this.ready,1):document.addEventListener?(document.addEventListener("DOMContentLoaded",this.ready,!1),window.addEventListener("load",this.ready,!1)):(document.attachEvent("onreadystatechange",this.readyStateChange),window.attachEvent("onload",this.ready))},this.readyStateChange=function(){"complete"===document.readyState&&this.ready()},this.ready=function(){t.readyFired||(t.readyFired=!0,t.callback())}}).init(e)},o.helpers.logData=function(e){var t=new Date,n=(t.getHours()<10?"0":"")+t.getHours(),i=(t.getMinutes()<10?"0":"")+t.getMinutes(),a=(t.getSeconds()<10?"0":"")+t.getSeconds(),r=(t.getDate()<10?"0":"")+t.getDate(),o=(t.getMonth()+1<10?"0":"")+(t.getMonth()+1),s=[[n,i,a].join(":"),[r,o,t.getFullYear()].join(".")].join(" ");console.log("%c[%s] %s","color: #999",s,e);var l=c.getElementById("ct-debug-log");l&&(l.innerHTML+=s+" - "+e+"<br>")},this},f=function(){var i={initState:null,inactivityTimeout:null,activityState:null,visibilityHiddenName:null,timers:{inactiveCallback:null},helpers:{},listOfActiveEvents:["mouseup","touchend","focus","blur","keydown","mousemove","resize","scroll"],listOfActiveCallbacks:[],listOfInactiveCallbacks:[],listOfActiveCallbacksWithKey:{},listOfInactiveCallbacksWithKey:{}};this.init=function(e){i.initState=!0,i.inactivityTimeout=e,i.activityState="active";for(var t=0;t<i.listOfActiveEvents.length;t++)try{r.addEventListener(i.listOfActiveEvents[t],function(e){i.helpers.trackActiveEvent(e)},!0)}catch(e){i.initState=!1}var n;void 0!==c.hidden?(i.visibilityHiddenName="hidden",n="visibilitychange"):void 0!==c.mozHidden?(i.visibilityHiddenName="mozHidden",n="mozvisibilitychange"):void 0!==c.msHidden?(i.visibilityHiddenName="msHidden",n="msvisibilitychange"):void 0!==c.webkitHidden&&(i.visibilityHiddenName="webkitHidden",n="webkitvisibilitychange");try{c.addEventListener(n,function(e){i.helpers.trackActiveEvent(e)},!0)}catch(e){i.initState=!1}i.helpers.setInactiveCallback()},this.onActive=function(e,t){t?i.listOfActiveCallbacksWithKey[t]=e:i.listOfActiveCallbacks.push(e)},this.onInactive=function(e,t){t?i.listOfInactiveCallbacksWithKey[t]=e:i.listOfInactiveCallbacks.push(e)},i.helpers.trackActiveEvent=function(e){if("visibilitychange"===e.type&&c[i.visibilityHiddenName])return!1;if(i.helpers.setInactiveCallback(),"inactive"===i.activityState){i.activityState="active";for(var t=0;t<i.listOfActiveCallbacks.length;t++)if("function"==typeof i.listOfActiveCallbacks[t])try{i.listOfActiveCallbacks[t]()}catch(e){}for(var n in i.listOfActiveCallbacksWithKey)if("function"==typeof i.listOfActiveCallbacksWithKey[n])try{i.listOfActiveCallbacksWithKey[n]()}catch(e){}}},i.helpers.handlerActionOfInactive=function(){if(!1===i.initState)return!1;i.activityState="inactive";for(var e=0;e<i.listOfInactiveCallbacks.length;e++)if("function"==typeof i.listOfInactiveCallbacks[e])try{i.listOfInactiveCallbacks[e]()}catch(e){}for(var t in i.listOfInactiveCallbacksWithKey)if("function"==typeof i.listOfInactiveCallbacksWithKey[t])try{i.listOfInactiveCallbacksWithKey[t]()}catch(e){}},i.helpers.setInactiveCallback=function(){clearTimeout(i.timers.inactiveCallback),i.timers.inactiveCallback=setTimeout(function(){i.helpers.handlerActionOfInactive()},1e3*i.inactivityTimeout)}};Date.now||(Date.now=function(){return(new Date).getTime()}),a=window,l={},u=(o={}).toString,d=/%20/g,h=/\[\]$/,(a.binotelJqMini=l).type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?o[u.call(e)]||"object":typeof e},l.isFunction=function(e){return"function"===l.type(e)},l.buildParams=function(e,t,n){var a,r;if(Array.isArray(t))for(var o in t)r=t[o],h.test(e)?n(e,r):l.buildParams(e+"["+("object"==typeof v?i:"")+"]",r,n);else if("object"===l.type(t))for(a in t)l.buildParams(e+"["+a+"]",t[a],n);else n(e,t)},l.param=function(e){var t,n,i;if(serialized=[],add=function(e,t){t=l.isFunction(t)?t():null==t?"":t,serialized[serialized.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)},Array.isArray(e))for(n in e)i=e[n],add(n,i);else for(t in e)l.buildParams(t,e[t],add);return serialized.join("&").replace(d,"+")}}function p(t,n,i){(t="object"==typeof t?t:{}).url=t.url||window.location.toString(),t.type="POST"===t.type?t.type:"GET",t.timeout=1e3*(0<t.timeout?parseInt(t.timeout):5),t.async=!1!==t.async||t.async,t.headers="object"==typeof t.headers?t.headers:{},t.dataType=-1!==["json","text"].indexOf(t.dataType)?t.dataType:"text";var a,r=function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml3.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}return null}(),e=null;if("object"==typeof t.data){var o=binotelJqMini.param(t.data);"GET"===t.type&&""!==o?t.url=(t.url+"&"+o).replace(/[&?]{1,2}/,"?"):"POST"===t.type&&""!==o&&(t.headers["Content-Type"]||(t.headers["Content-Type"]="application/x-www-form-urlencoded"),e=o)}for(headerName in r.onreadystatechange=function(){if(4==r.readyState)if(clearTimeout(a),200==r.status)if("json"==t.dataType){var e;try{e=JSON.parse(r.responseText)}catch(e){i(r,"parsererror")}e&&n(e)}else"text"==t.dataType&&n(r.responseText);else i(r,r.statusText)},r.open(t.type,t.url,t.async),t.headers)r.setRequestHeader(headerName,t.headers[headerName]);0<t.timeout&&(a=setTimeout(function(){r.onreadystatechange=function(){},r.abort(),i(r,"timeout")},t.timeout)),r.send(e)}function m(e){return e.join?e.join(" "):e}}(document,window);